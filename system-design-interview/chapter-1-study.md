
### 1,2 장

**1명 -> 100만명**
아키텍처 어떻게 발전시킬까

1명일 땐 어떨까

카프카의 단점
서비스가 작을 땐 오버스펙이다

테스트 코드도 급변할 땐 방해가 될 수도 있다



**서버 확장 방법**

몇명이면 뭘 해야한다 이런게 아니라, 왜 그렇게 결정하는지가 더 중함


스케일업
인메모리로 빠르게 돌려봐야하는 경우가 있을 때는 걍 스케일업 해서 빠르게 한다

스케일아웃
작업 자체를 분리할 수 있는 것이라면..

스케일 아웃을 하게 되는데 공통으로 바라봐야하는 데이터가 있다면 레디스를 같이 고려할것 같은데요 레디스가 SPOF 라서 이것도 또 신경쓰긴 해야할것 같아요

**WebSocket 기능을 활용해서 채팅 기능을 구현한다면, scale out은 어떻게 할 수 있을까요?**
로드밸런서 스티키 세션 << 한놈이 채팅 엄청 치면 곤란함.. 이거 어케 분산함
중간에 redis 같은 pub/sub을 활용한다
채팅 제한

카프카로 채팅은 쉽지 않다


**디비 확장하는 법**
디비는 알면 알수록 좋다

수직은
데이터 분산시키지 못하는 상황
Join이 많으면~ 수평이 불리할 것같은걸요
DB 서버의 컴퓨터 자원이 임계치에 도달하기 전에?
DB가 장애의 원인일 때
마스터에 대한 부하가 심할때 << 마스터 슬레이브는 수평적 확장이 불가능함
인덱스를 올렸다 내렸다함..


**nosql**
rdbms 에선
sql 쿼리가 오면 실행 가능한 실행 트리를 ㅁ만들고 실행 엔진을 만들고 등등 하는데 이게 느려질 수 있다ㅏ

상황에 따라 다르다
no 가 더 빠른게, 디스크에 저장하는 형태가 더 빠르기 때문.
log structured merge tree

rdbms
디스크에 페이지 단위로 저장함.
디스크 -> 메모리 -> 메모리에서 수정하고 -> 디스크에 플러쉬하는데
inplace 업데이트를 해야 해서,

nosql 은 디스크 젤 뒤에 어펜드 하는 식으로 순차적으로 넣는다. 걍 뒤에 넣기만 하면 되서 빠름

근데 nosql 은 컨팩션 해야 함. 
로그가 계속 쌓이면 조회 비용이 늘어남.. 그거 다 확인 해야 하니까
**컴팩션 할 때 왜 그 대상 데이터를 그대로 둬야할까?**



디비 책
real mysql, 데이터 중심 애플리케이션 설계, 디비 관련 유튜브, CMU Andy Pavlo
리얼mysql 2권은 안 봐도 됨. 운영이라

github mini-lsm
rust 로 lsm 짠 것.. 



잘 하는 사람들을 따라다님..

toastmaster << 영어 스피치
cs 는 코드로 파봐라
primegen << 유튜버



멧돼지책



페이지가 연속되지 않으면 느리다



ac.kr 도메인 사서 학교 인증하기